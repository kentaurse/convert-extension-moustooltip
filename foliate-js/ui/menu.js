const createMenuItemRadioGroup=(e,t,n)=>{const o=document.createElement("ul");o.setAttribute("role","group"),o.setAttribute("aria-label",e);const r=new Map,c=e=>{n(e);const t=r.get(e);for(const e of o.children)e.setAttribute("aria-checked",e===t?"true":"false")};for(const[e,n]of t){const t=document.createElement("li");t.setAttribute("role","menuitemradio"),t.innerText=e,t.onclick=()=>c(n),r.set(n,t),o.append(t)}return{element:o,select:c}};export const createMenu=e=>{const t={},n=document.createElement("ul");n.setAttribute("role","menu");const o=()=>n.classList.remove("show"),r=e=>(...t)=>(o(),e(...t));for(const{name:o,label:c,type:s,items:a,onclick:l}of e){const e="radio"===s?createMenuItemRadioGroup(c,a,r(l)):null;o&&(t[o]=e),n.append(e.element)}return window.addEventListener("blur",(()=>o())),window.addEventListener("click",(e=>{n.parentNode.contains(e.target)||o()})),{element:n,groups:t}};