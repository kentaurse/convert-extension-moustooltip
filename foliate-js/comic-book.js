export const makeComicBook=({entries:e,loadBlob:t,getSize:o},n)=>{const a=new Map,r=new Map,s=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"],i=e.map((e=>e.filename)).filter((e=>s.some((t=>e.endsWith(t))))).sort(),l={getCover:()=>t(i[0])};return l.metadata={title:n.name},l.sections=i.map((e=>({id:e,load:()=>(async e=>{if(a.has(e))return a.get(e);const o=URL.createObjectURL(await t(e)),n=URL.createObjectURL(new Blob([`<img src="${o}">`],{type:"text/html"}));return r.set(e,[o,n]),a.set(e,n),n})(e),unload:()=>(e=>{r.get(e)?.forEach?.((e=>URL.revokeObjectURL(e))),r.delete(e),a.delete(e)})(e),size:o(e)}))),l.toc=i.map((e=>({label:e,href:e}))),l.rendition={layout:"pre-paginated"},l.resolveHref=e=>({index:l.sections.findIndex((t=>t.id===e))}),l.splitTOCHref=e=>[e,null],l.getTOCFragment=e=>e.documentElement,l.destroy=()=>{for(const e of r.values())for(const t of e)URL.revokeObjectURL(t)},l};